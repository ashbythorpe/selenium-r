<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Debugging selenium • selenium</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Debugging selenium">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">selenium</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/selenium.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/debugging.html">Debugging selenium</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ashbythorpe/selenium-r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Debugging selenium</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ashbythorpe/selenium-r/blob/main/vignettes/articles/debugging.Rmd" class="external-link"><code>vignettes/articles/debugging.Rmd</code></a></small>
      <div class="d-none name"><code>debugging.Rmd</code></div>
    </div>

    
    
<p>Web automation is a complex and fragile task, with many ways to go
wrong. This article describes some common errors and pitfalls, and how
you might go about resolving them.</p>
<div class="section level2">
<h2 id="starting-the-client">Starting the client<a class="anchor" aria-label="anchor" href="#starting-the-client"></a>
</h2>
<p>If initializing a <code>SeleniumSession</code> fails, it is often
useful to look at the logs from the server. If you ran the
<code>java -jar ...</code> command manually, then you should be able to
see the logs, but if you used <code><a href="../reference/selenium_server.html">selenium_server()</a></code>, then you
can use the <code>read_output()</code> method to read the logs.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/selenium_server.html">selenium_server</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">server</span><span class="op">$</span><span class="fu">read_output</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This will show any output that the server has written to the console.
Similarly, use <code>read_error()</code> to read any errors that the
server has written to the console.</p>
<div class="section level3">
<h3 id="port-and-ip-address">Port and IP address<a class="anchor" aria-label="anchor" href="#port-and-ip-address"></a>
</h3>
<p>One reason why you can’t connect to the server is that the port and
IP address you are using is wrong.</p>
<p>To get the IP address and port number that the server is using, you
need to look at the server logs. You should see a line like:
<code>INFO [Standalone.execute] - Started Selenium Standalone ... (revision ...): http://&lt;IP&gt;:&lt;PORT&gt;</code></p>
<p>The URL at the end of this message can be used to extract an IP
address and a port number, which can then be passed into the
<code>host</code> and <code>port</code> arguments. For example, if the
URL was: <code>http://172.17.0.1/4444</code>, you would run:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">session</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/SeleniumSession.html">SeleniumSession</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>host <span class="op">=</span> <span class="st">"172.17.0.1"</span>, port <span class="op">=</span> <span class="fl">4444</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-a-different-debugging-port-for-chrome">Using a different debugging port for Chrome<a class="anchor" aria-label="anchor" href="#using-a-different-debugging-port-for-chrome"></a>
</h3>
<p>If you are using Chrome, and you see a browser open, but the call to
<code>SeleniumSession$new()</code> times out, you may need to use a
different debugging port. For example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">session</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/SeleniumSession.html">SeleniumSession</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  browser <span class="op">=</span> <span class="st">"chrome"</span>,</span>
<span>  capabilities <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    `goog:chromeOptions` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"remote-debugging-port=9222"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="increasing-devshm-size-when-using-docker">Increasing /dev/shm/ size when using docker<a class="anchor" aria-label="anchor" href="#increasing-devshm-size-when-using-docker"></a>
</h3>
<p>If you are running selenium using docker, you may need to increase
the size of <code>/dev/shm/</code> to avoid running out of memory. This
issue usually happens when using Chrome, and usually results in a
message like <code>session deleted because of page crash</code>.</p>
<p>You can use the <code>--shm-size</code> to the selenium docker images
to fix this issue. For example:
<code>docker run --shm-size="2g" selenium/standalone-chrome:&lt;version&gt;</code></p>
</div>
</div>
<div class="section level2">
<h2 id="other-common-errors">Other common errors<a class="anchor" aria-label="anchor" href="#other-common-errors"></a>
</h2>
<div class="section level3">
<h3 id="stale-element-reference-errors">Stale element reference errors<a class="anchor" aria-label="anchor" href="#stale-element-reference-errors"></a>
</h3>
<p>At some point, when using selenium, you will encounter the following
error:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; Error in `element$click()`:</span></span>
<span><span class="co">#&gt; ! Stale element reference.</span></span>
<span><span class="co">#&gt; ✖ The element with the reference &lt;...&gt; is not known in the current browsing context</span></span>
<span><span class="co">#&gt; Caused by error in `httr2::req_perform()`:</span></span>
<span><span class="co">#&gt; ! HTTP 404 Not Found.</span></span>
<span><span class="co">#&gt; Run `rlang::last_trace()` to see where the error occurred.</span></span></code></pre></div>
<p>This error is common when automating a website. Selenium is telling
you that an element which you previously identified no longer exists. In
all websites, especially complex ones, the DOM will be constantly
updating itself, constantly invalidating references to elements. This
error is a particularly annoying one, as it can happen at any time and
is impossible to predict.</p>
<p>One way to deal with this error is to use elements as soon as they
are created, only keeping references to elements if you are sure that
they will not be invalidated. For example, if you want to click the same
element twice, with a second-long gap in between, you may want to
consider fetching the element once for each time, rather than sharing
the reference between the actions.</p>
<p>However, this solution is not infallible. If you find yourself
encountering this error a lot, it may be a sign that a more high-level
package, that can deal with this issue (e.g. <a href="https://github.com/ashbythorpe/selenider" class="external-link">selenider</a>), is
needed.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ashby Thorpe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
